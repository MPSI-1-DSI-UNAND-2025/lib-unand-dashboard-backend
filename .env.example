# Server
PORT=3000
NODE_ENV=development

# MySQL (read-only user recommended)
MYSQL_HOST=127.0.0.1
MYSQL_PORT=3306
MYSQL_USER=readonly
MYSQL_PASSWORD=secret
MYSQL_DATABASE=library
MYSQL_POOL_LIMIT=10

# Redis
# Either provide REDIS_URL or host/port/password
# REDIS_URL=redis://:password@127.0.0.1:6379/0
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=

# Dynamic fast loop (today count)
# These replace the old cron-based VISITOR_SYNC_CRON for fast job.
# Minimum gap between starts (ms)
VISITOR_SYNC_MIN_INTERVAL_MS=5000
# Extra buffer wait after each run (ms)
VISITOR_SYNC_BUFFER_MS=500

# Slow cron (weekly + monthly + yearly aggregates) runs daily at 00:05
VISITOR_SLOW_CRON=0 5 0 * * *

# Today counting mode:
# direct       -> query DB every time (range predicate)
# incremental  -> Redis rolling counter + periodic reconcile
# delta        -> baseline (count + max id) then only count new rows (no write hook needed)
TODAY_COUNT_MODE=direct
